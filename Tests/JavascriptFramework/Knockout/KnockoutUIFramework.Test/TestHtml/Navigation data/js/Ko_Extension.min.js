function Enum(n, t, i, r) { this.intValue = t; this.displayName = r; this.name = i; this.type = n } function executeAsPromise(n, t, i) { return new Promise(function (r, u) { var f = { fullfill: function (n) { r(n) }, reject: function (n) { u(new Error(n)) } }; n[t]().Execute(i, f) }) } (function () { function f(n, t, i) { return function (r) { i.TrackChanges(n, t, r) } } function e(n, t) { return function (i) { for (var u = [], f = [], e = [], o = i.length, r = 0; r < o; r++) u.push(i[r].value), f.push(i[r].status), e.push(i[r].index); t.TrackCollectionChanges(n, u, f, e) } } function t(n, t, i, r) { t.TrackChanges ? (listener = f(i, r, t), n.listener = listener, n.subscriber = n.subscribe(listener), n.silent = function (t) { n.subscriber.dispose(); n(t); n.subscriber = n.subscribe(n.listener) }) : n.silent = n } function i(n, t) { if (t.TrackCollectionChanges) { var i = e(n, t); n.listener = i; n.subscriber = n.subscribe(i, null, "arrayChange"); n.silent = function (t) { return function () { n.subscriber.dispose(); t.apply(n, arguments); n.subscriber = n.subscribe(i, null, "arrayChange") } } } else n.silent = function (t) { return function () { t.apply(n, arguments) } }; n.silentsplice = n.silent(n.splice); n.silentremoveAll = n.silent(n.removeAll) } function n(r, u, f, e) { var v, c, o, s, l, p, y, h, a; if (typeof r != "object" || r instanceof Date || r instanceof Enum) return r; if (n.Cache || (n.Cache = {}, n._MappedId = 0), f || (f = {}), e || (e = {}), r === null) return u === null ? (f.Register && f.Register(r), f.End && f.End(r), r) : null; if (r._MappedId !== undefined) { if (v = n.Cache[r._MappedId], v) return u === null && f.End && f.End(v), v } else { while (n.Cache[n._MappedId]) n._MappedId++; r._MappedId = n._MappedId } if (Array.isArray(r)) { for (c = ko.observableArray(), c._MappedId = r._MappedId, n.Cache[r._MappedId] = c, f.Register && u === null && f.Register(c), h = 0; h < r.length; ++h) c.push(n(r[h], { object: c, attribute: null, index: h }, f, e)); return i(c, e), u === null && f.End && f.End(c), c } o = {}; o._MappedId = r._MappedId; n.Cache[r._MappedId] = o; f.Register && (u === null ? f.Register(o) : u.index === undefined ? f.Register(o, u.object, u.attribute) : f.Register(o, u.object, u.attribute, u.index)); for (s in r) if (s !== "_MappedId" && r.hasOwnProperty(s)) if (l = r[s], l !== null && typeof l == "object") if (Array.isArray(l)) { for (y = [], h = 0; h < l.length; ++h) y.push(n(l[h], { object: o, attribute: s, index: h }, f, e)); a = ko.observableArray(y); a._MappedId = l._MappedId; o[s] = ko.observable(a); f.Register && f.Register(a, o, s); i(a, e); t(o[s], e, o, s) } else p = n(l, { object: o, attribute: s }, f, e), o[s] = ko.observable(p), t(o[s], e, o, s); else o[s] = ko.observable(l), t(o[s], e, o, s); return u === null && f.End && f.End(o), o } function o(n, t) { n.className += " " + t } function s(n, t) { var i = new RegExp("(?:^|s)" + t + "(?!S)"); n.className.replace(RegExp, "") } function r(n, t, i) { i && (t ? o(n, i) : s(n, i)) } ko.isDate = function (n) { return n instanceof Date }; ko.MapToObservable = function (t, i, r) { return n(t, null, i, r) }; ko.toJSONreplacer = function () { function i(r, u, f) { var h, c, o, e, s; if (f = f || [], f.indexOf(r) !== -1) { h = n.indexOf(r); h >= 0 ? t[h].push(u) : (n.push(r), t.push([u])); return } c = f.push(r); for (o in r) if (r.hasOwnProperty(o) && (e = r[o], e !== null && typeof e == "object")) if (Array.isArray(e)) for (s = 0; s < e.length; ++s) i(e[s], o, f); else i(e, o, f); f.splice(c - 1, 1) } var n = [], t = [], r = !0; return function (u, f) { r && (r = !1, i(f)); var e = n.indexOf(f); return e >= 0 && t[e].indexOf(u) >= 0 ? "[Circular]" : f } }; ko.bindingHandlers.command = { init: function (n, t, i, u, f) { var e = i.get("commandoption") || {}, s = e.event || "click", h = e.callback, o = t(), c = function (n) { var t = o(); t !== null && (!n || n(), t.Execute(f.$data)) }; ko.computed({ read: function () { var u = o(), s = "enablevalue", t = u !== null && u.CanExecute(f.$data) === undefined && u.CanExecuteCount() && u.CanExecuteValue(), l = ko.utils.domData.get(n, s), h, c; l !== t && (ko.utils.domData.set(n, s, t), h = e.cssOn, c = e.ccsOff, ko.bindingHandlers.enable.update(n, function () { return t }, i), r(n, t, h), r(n, !t, c)) }, disposeWhenNodeIsRemoved: n }); n.addEventListener(s, function () { c(h) }, !1) } }; ko.bindingHandlers.execute = { init: function (n, t, i, r, u) { var f = i.get("executeoption") || {}, e = f.event || "click", o = f.callback, s = t(), h = function (n) { var t = s(); t !== null && (!n || n(), t.Execute(u.$data)) }; n.addEventListener(e, function () { h(o) }, !1) } }; ko.bindingHandlers.parentCommand = { preprocess: function (n) { return n }, init: function (n, t, i, r, u) { var e = t(), f = {}; ko.utils.objectForEach(e, function (n, t) { var i = {}; f[n] = i; ko.utils.objectForEach(t, function (n, t) { i[n] = function (n) { t().Execute(n) } }) }); console.log(f); ko.bindingHandlers.delegatedParentHandler.init(n, function () { return f }, i, r, u) } }; ko.bindingHandlers.executeResult = { init: function (n, t, i) { var r = i.get("promiseoption"), u = typeof r == "function" ? r : r.then, f = r.error || function () { }, h = r.arg, e = r.event || "click", o = t(), s = function (n) { return new Promise(function (t, i) { var r = { fullfill: function (n) { t(n) }, reject: function (n) { i(new Error(n)) } }; o().Execute(n, r) }) }; n.addEventListener(e, function () { s(ko.utils.unwrapObservable(i.get("promiseoption").arg)).then(u).catch(f) }, !1) } }; ko.bindingHandlers.numberInput = { init: function (n, t, i) { var r = t(), u = i.get("valueUpdate"), f = u === "afterkeydown" ? "input" : "change"; n.addEventListener(f, function () { var t = Number(n.value); isNaN(t) && (n.value = 0, t = 0); r(t) }, !1) }, update: function (n, t) { var i = t(); n.value = i() } }; ko.getimage = function (n) { if (!n instanceof Enum || !ko.Enumimages) return null; var t = ko.Enumimages[n.type]; return t ? t[n.name] : null }; ko.images = function (n) { return !ko.Enumimages ? null : ko.Enumimages[n] }; ko.bindingHandlers.enumimage = { update: function (n, t) { var r = ko.utils.unwrapObservable(t()), i = ko.getimage(r); i && (n.src = i) } }; ko.bindingHandlers.enumimagewithfallback = { update: function (n, t) { var i = ko.utils.unwrapObservable(t()), r = ko.getimage(i.image) || i.fallback; n.src = r } }; ko.bindingHandlers.onclose = { preprocess: function (n) { return "{when: $root.Window().State, act: " + n + "}" }, init: function (n, t, i, r, u) { u.$root.Window().IsListeningClose(!0) }, update: function (n, t, i, r, u) { var f = ko.utils.unwrapObservable(t()); f.when().name === "Closing" && f.act(function () { u.$root.Window().CloseReady().Execute() }, n) } }; ko.bindingHandlers.onopened = { preprocess: function (n) { return "{when:  $root._Window).State, act: " + n + "}" }, init: function (n, t, i, r, u) { u.$root.Window().IsListeningOpen(!0) }, update: function (n, t, i, r, u) { var f = ko.utils.unwrapObservable(t()); f.when().name === "Opened" && f.act(n, function () { u.$root.Window().EndOpen().Execute() }) } }; var u = ko.bindingProvider.instance; ko.bindingProvider.instance = { nodeHasBindings: u.nodeHasBindings, getBindings: function (n, t) { var i; try { i = u.getBindings(n, t) } catch (r) { window.console && console.log && console.log("binding error : " + r.message, n, t); ko.log && ko.log("ko binding error: '" + r.message + "'", "node HTML: " + n.outerHTML, "context:" + ko.toJSON(t.$data, ko.toJSONreplacer())) } return i } } })();
//# sourceMappingURL=Ko_Extension.min.js.map
